# render.yaml

services:
  - type: web
    name: task-management-api        # ← replace with your Render service name
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn app:app
    # This runs **once** before each deploy—here it adds the column if missing
    releaseCommand: >
      psql $DATABASE_URL -c
      "ALTER TABLE task
       ADD COLUMN IF NOT EXISTS estimated_hours double precision;"
